---
source: modifications.sqltest
expression: |-
  UPDATE products
      SET price = price * 1.10, quantity = quantity - 10
      WHERE category = 'Electronics';
info:
  statement_type: UPDATE
  tables:
  - products
  setup_blocks:
  - schema
  database: ':memory:'
---
QUERY PLAN


BYTECODE
addr  opcode            p1  p2  p3  p4              p5  comment
   0  Init               0  31   0                   0  Start at 31
   1  OpenWrite          0   2   0                   0  root=2; iDb=0
   2  OpenWrite          1  11   0                   0  root=11; iDb=0
   3  String8            0   1   0  Electronics      0  r[1]='Electronics'
   4  SeekGE             1  30   1                   0  key=[1..1]
   5    IdxGT            1  30   1                   0  key=[1..1]
   6    DeferredSeek     1   0   0                   0
   7    RowId            0   2   0                   0  r[2]=products.rowid
   8    IsNull           2  30   0                   0  if (r[2]==NULL) goto 30
   9    Null             0   3   0                   0  r[3]=NULL
  10    Column           0   1   4                   0  r[4]=products.name
  11    Column           0   2   8                   0  r[8]=products.price
  12    RealAffinity     8   0   0                   0
  13    Multiply         8   9   5                   0  r[5]=r[8]*r[9]
  14    HaltIfNull    1299   0   5  products.price   0
  15    Column           0   3  10  0                0  r[10]=products.quantity
  16    Subtract        10  11   6                   0  r[6]=r[10]-r[11]
  17    Column           1   0   7                   0  r[7]=idx_products_category.category
  18    Affinity         3   5   0                   0  r[3..8] = D, B, E, D, B
  19    RowId            0  12   0                   0  r[12]=products.rowid
  20    Column           0   1  13                   0  r[13]=products.name
  21    Column           0   2  14                   0  r[14]=products.price
  22    Column           0   3  15  0                0  r[15]=products.quantity
  23    Column           0   4  16                   0  r[16]=products.category
  24    Null             0   3   0                   0  r[3]=NULL
  25    Column           0   1   4                   0  r[4]=products.name
  26    Column           1   0   7                   0  r[7]=idx_products_category.category
  27    MakeRecord       3   5  17                   0  r[17]=mkrec(r[3..7])
  28    Insert           0  17   2  products         8  intkey=r[2] data=r[17]
  29  Next               1   5   0                   0
  30  Halt               0   0   0                   0
  31  Transaction        0   2  10                   0  iDb=0 tx_mode=Write
  32  Real               0   9   0  1.1              0  r[9]=1.1
  33  Integer           10  11   0                   0  r[11]=10
  34  Goto               0   1   0                   0
