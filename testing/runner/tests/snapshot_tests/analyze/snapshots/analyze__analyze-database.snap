---
source: analyze.sqltest
expression: ANALYZE main;
info:
  statement_type: OTHER
  setup_blocks:
  - schema
  database: ':memory:'
---
QUERY PLAN


BYTECODE
addr  opcode       p1   p2   p3  p4                                               p5  comment
   0  Init          0  197    0                                                    0  Start at 197
   1  Null          0    1    0                                                    0  r[1]=NULL
   2  CreateBtree   0    2    1                                                    0  r[2]=root iDb=0 flags=1
   3  OpenWrite     0    1    0                                                    0  root=1; iDb=0
   4  NewRowid      0    3    0                                                    0  r[3]=rowid
   5  String8       0    4    0  table                                             0  r[4]='table'
   6  String8       0    5    0  sqlite_stat1                                      0  r[5]='sqlite_stat1'
   7  String8       0    6    0  sqlite_stat1                                      0  r[6]='sqlite_stat1'
   8  Copy          2    7    0                                                    0  r[7]=r[2]
   9  String8       0    8    0  CREATE TABLE sqlite_stat1(tbl,idx,stat)           0  r[8]='CREATE TABLE sqlite_stat1(tbl,idx,stat)'
  10  MakeRecord    4    5    9                                                    0  r[9]=mkrec(r[4..8])
  11  Insert        0    9    3  sqlite_stat1                                      0  intkey=r[3] data=r[9]
  12  ParseSchema   0    0    0  tbl_name = 'sqlite_stat1' AND type != 'trigger'   0  tbl_name = 'sqlite_stat1' AND type != 'trigger'
  13  SetCookie     0    1   10                                                    0
  14  OpenWrite     1    2    0                                                    0  root=2; iDb=0
  15  Rewind        1   22    0                                                    0  Rewind  sqlite_stat1
  16      Column    1    0   10                                                    0  r[10]=sqlite_stat1.tbl
  17      Ne       10   11   21                                                    0  if r[10]!=r[11] goto 21
  18      RowId     1   12    0                                                    0  r[12]=sqlite_stat1.rowid
  19      Delete    1    0    0  sqlite_stat1                                      0
  20    Next        1   16    0                                                    0
  21  Next          1   16    0                                                    0
  22  OpenRead      2    2    0  k(6,B,B,B,B,B,B)                                  0  =products, root=2, iDb=0
  23  Count         2   18    0                                                    0
  24  IfNot        18   31    0                                                    0  if !r[18] goto 31
  25  Null          0   15    0                                                    0  r[15]=NULL
  26  Copy         18   16    0                                                    0  r[16]=r[18]
  27  Cast         16    0    0                                                    0  affinity(r[16]=Text)
  28  MakeRecord   14    3   17                                                    0  r[17]=mkrec(r[14..16])
  29  NewRowid      1   13    0                                                    0  r[13]=rowid
  30  Insert        1   17   13  sqlite_stat1                                      0  intkey=r[13] data=r[17]
  31  OpenRead      3    5    0  k(2,B)                                            0  =idx_products_price, root=5, iDb=0
  32  Integer       1   20    0                                                    0  r[20]=1
  33  Function      0   20   19  stat_init                                         0  r[19]=func(r[20])
  34  Rewind        3   51    0                                                    0  Rewind  idx_products_price
  35  Integer       0   20    0                                                    0  r[20]=0
  36  Goto          0   42    0                                                    0
  37    Integer     0   20    0                                                    0  r[20]=0
  38    Column      3    0   22                                                    0  r[22]=idx_products_price.price
  39    Ne         22   21   42                                                    0  if r[22]!=r[21] goto 42
  40    Integer     1   20    0                                                    0  r[20]=1
  41    Goto        0   43    0                                                    0
  42    Column      3    0   21                                                    0  r[21]=idx_products_price.price
  43    Function    0   19   19  stat_push                                         0  r[19]=func(r[19..20])
  44  Next          3   37    0                                                    0
  45  Function      0   19   23  stat_get                                          0  r[23]=func(r[19])
  46  IsNull       23   51    0                                                    0  if (r[23]==NULL) goto 51
  47  Copy         23   26    0                                                    0  r[26]=r[23]
  48  MakeRecord   24    3   27                                                    0  r[27]=mkrec(r[24..26])
  49  NewRowid      1   28    0                                                    0  r[28]=rowid
  50  Insert        1   27   28  sqlite_stat1                                      0  intkey=r[28] data=r[27]
  51  OpenRead      4    4    0  k(2,B)                                            0  =idx_products_category, root=4, iDb=0
  52  Integer       1   30    0                                                    0  r[30]=1
  53  Function      0   30   29  stat_init                                         0  r[29]=func(r[30])
  54  Rewind        4   71    0                                                    0  Rewind  idx_products_category
  55  Integer       0   30    0                                                    0  r[30]=0
  56  Goto          0   62    0                                                    0
  57    Integer     0   30    0                                                    0  r[30]=0
  58    Column      4    0   32                                                    0  r[32]=idx_products_category.category
  59    Ne         32   31   62                                                    0  if r[32]!=r[31] goto 62
  60    Integer     1   30    0                                                    0  r[30]=1
  61    Goto        0   63    0                                                    0
  62    Column      4    0   31                                                    0  r[31]=idx_products_category.category
  63    Function    0   29   29  stat_push                                         0  r[29]=func(r[29..30])
  64  Next          4   57    0                                                    0
  65  Function      0   29   33  stat_get                                          0  r[33]=func(r[29])
  66  IsNull       33   71    0                                                    0  if (r[33]==NULL) goto 71
  67  Copy         33   36    0                                                    0  r[36]=r[33]
  68  MakeRecord   34    3   37                                                    0  r[37]=mkrec(r[34..36])
  69  NewRowid      1   38    0                                                    0  r[38]=rowid
  70  Insert        1   37   38  sqlite_stat1                                      0  intkey=r[38] data=r[37]
  71  OpenRead      5    3    0  k(2,B)                                            0  =idx_products_sku, root=3, iDb=0
  72  Integer       1   40    0                                                    0  r[40]=1
  73  Function      0   40   39  stat_init                                         0  r[39]=func(r[40])
  74  Rewind        5   91    0                                                    0  Rewind  idx_products_sku
  75  Integer       0   40    0                                                    0  r[40]=0
  76  Goto          0   82    0                                                    0
  77    Integer     0   40    0                                                    0  r[40]=0
  78    Column      5    0   42                                                    0  r[42]=idx_products_sku.sku
  79    Ne         42   41   82                                                    0  if r[42]!=r[41] goto 82
  80    Integer     1   40    0                                                    0  r[40]=1
  81    Goto        0   83    0                                                    0
  82    Column      5    0   41                                                    0  r[41]=idx_products_sku.sku
  83    Function    0   39   39  stat_push                                         0  r[39]=func(r[39..40])
  84  Next          5   77    0                                                    0
  85  Function      0   39   43  stat_get                                          0  r[43]=func(r[39])
  86  IsNull       43   91    0                                                    0  if (r[43]==NULL) goto 91
  87  Copy         43   46    0                                                    0  r[46]=r[43]
  88  MakeRecord   44    3   47                                                    0  r[47]=mkrec(r[44..46])
  89  NewRowid      1   48    0                                                    0  r[48]=rowid
  90  Insert        1   47   48  sqlite_stat1                                      0  intkey=r[48] data=r[47]
  91  Rewind        1   98    0                                                    0  Rewind  sqlite_stat1
  92      Column    1    0   49                                                    0  r[49]=sqlite_stat1.tbl
  93      Ne       49   50   97                                                    0  if r[49]!=r[50] goto 97
  94      RowId     1   51    0                                                    0  r[51]=sqlite_stat1.rowid
  95      Delete    1    0    0  sqlite_stat1                                      0
  96    Next        1   92    0                                                    0
  97  Next          1   92    0                                                    0
  98  OpenRead      6    9    0  k(5,B,B,B,B,B)                                    0  =inventory, root=9, iDb=0
  99  Count         6   57    0                                                    0
 100  IfNot        57  107    0                                                    0  if !r[57] goto 107
 101  Null          0   54    0                                                    0  r[54]=NULL
 102  Copy         57   55    0                                                    0  r[55]=r[57]
 103  Cast         55    0    0                                                    0  affinity(r[55]=Text)
 104  MakeRecord   53    3   56                                                    0  r[56]=mkrec(r[53..55])
 105  NewRowid      1   52    0                                                    0  r[52]=rowid
 106  Insert        1   56   52  sqlite_stat1                                      0  intkey=r[52] data=r[56]
 107  OpenRead      7   10    0  k(4,B,B,B)                                        0  =idx_inventory_location, root=10, iDb=0
 108  Integer       3   59    0                                                    0  r[59]=3
 109  Function      0   59   58  stat_init                                         0  r[58]=func(r[59])
 110  Rewind        7  135    0                                                    0  Rewind  idx_inventory_location
 111  Integer       0   59    0                                                    0  r[59]=0
 112  Goto          0  124    0                                                    0
 113    Integer     0   59    0                                                    0  r[59]=0
 114    Column      7    0   63                                                    0  r[63]=idx_inventory_location.warehouse_id
 115    Ne         63   60  124                                                    0  if r[63]!=r[60] goto 124
 116    Integer     1   59    0                                                    0  r[59]=1
 117    Column      7    1   63                                                    0  r[63]=idx_inventory_location.product_id
 118    Ne         63   61  125                                                    0  if r[63]!=r[61] goto 125
 119    Integer     2   59    0                                                    0  r[59]=2
 120    Column      7    2   63                                                    0  r[63]=idx_inventory_location.bin_location
 121    Ne         63   62  126                                                    0  if r[63]!=r[62] goto 126
 122    Integer     3   59    0                                                    0  r[59]=3
 123    Goto        0  127    0                                                    0
 124    Column      7    0   60                                                    0  r[60]=idx_inventory_location.warehouse_id
 125    Column      7    1   61                                                    0  r[61]=idx_inventory_location.product_id
 126    Column      7    2   62                                                    0  r[62]=idx_inventory_location.bin_location
 127    Function    0   58   58  stat_push                                         0  r[58]=func(r[58..59])
 128  Next          7  113    0                                                    0
 129  Function      0   58   64  stat_get                                          0  r[64]=func(r[58])
 130  IsNull       64  135    0                                                    0  if (r[64]==NULL) goto 135
 131  Copy         64   67    0                                                    0  r[67]=r[64]
 132  MakeRecord   65    3   68                                                    0  r[68]=mkrec(r[65..67])
 133  NewRowid      1   69    0                                                    0  r[69]=rowid
 134  Insert        1   68   69  sqlite_stat1                                      0  intkey=r[69] data=r[68]
 135  Rewind        1  142    0                                                    0  Rewind  sqlite_stat1
 136      Column    1    0   70                                                    0  r[70]=sqlite_stat1.tbl
 137      Ne       70   71  141                                                    0  if r[70]!=r[71] goto 141
 138      RowId     1   72    0                                                    0  r[72]=sqlite_stat1.rowid
 139      Delete    1    0    0  sqlite_stat1                                      0
 140    Next        1  136    0                                                    0
 141  Next          1  136    0                                                    0
 142  OpenRead      8    6    0  k(5,B,B,B,B,B)                                    0  =orders, root=6, iDb=0
 143  Count         8   78    0                                                    0
 144  IfNot        78  151    0                                                    0  if !r[78] goto 151
 145  Null          0   75    0                                                    0  r[75]=NULL
 146  Copy         78   76    0                                                    0  r[76]=r[78]
 147  Cast         76    0    0                                                    0  affinity(r[76]=Text)
 148  MakeRecord   74    3   77                                                    0  r[77]=mkrec(r[74..76])
 149  NewRowid      1   73    0                                                    0  r[73]=rowid
 150  Insert        1   77   73  sqlite_stat1                                      0  intkey=r[73] data=r[77]
 151  OpenRead      9    8    0  k(2,B)                                            0  =idx_orders_status, root=8, iDb=0
 152  Integer       1   80    0                                                    0  r[80]=1
 153  Function      0   80   79  stat_init                                         0  r[79]=func(r[80])
 154  Rewind        9  171    0                                                    0  Rewind  idx_orders_status
 155  Integer       0   80    0                                                    0  r[80]=0
 156  Goto          0  162    0                                                    0
 157    Integer     0   80    0                                                    0  r[80]=0
 158    Column      9    0   82                                                    0  r[82]=idx_orders_status.status
 159    Ne         82   81  162                                                    0  if r[82]!=r[81] goto 162
 160    Integer     1   80    0                                                    0  r[80]=1
 161    Goto        0  163    0                                                    0
 162    Column      9    0   81                                                    0  r[81]=idx_orders_status.status
 163    Function    0   79   79  stat_push                                         0  r[79]=func(r[79..80])
 164  Next          9  157    0                                                    0
 165  Function      0   79   83  stat_get                                          0  r[83]=func(r[79])
 166  IsNull       83  171    0                                                    0  if (r[83]==NULL) goto 171
 167  Copy         83   86    0                                                    0  r[86]=r[83]
 168  MakeRecord   84    3   87                                                    0  r[87]=mkrec(r[84..86])
 169  NewRowid      1   88    0                                                    0  r[88]=rowid
 170  Insert        1   87   88  sqlite_stat1                                      0  intkey=r[88] data=r[87]
 171  OpenRead     10    7    0  k(3,B,B)                                          0  =idx_orders_customer_date, root=7, iDb=0
 172  Integer       2   90    0                                                    0  r[90]=2
 173  Function      0   90   89  stat_init                                         0  r[89]=func(r[90])
 174  Rewind       10  195    0                                                    0  Rewind  idx_orders_customer_date
 175  Integer       0   90    0                                                    0  r[90]=0
 176  Goto          0  185    0                                                    0
 177    Integer     0   90    0                                                    0  r[90]=0
 178    Column     10    0   93                                                    0  r[93]=idx_orders_customer_date.customer_id
 179    Ne         93   91  185                                                    0  if r[93]!=r[91] goto 185
 180    Integer     1   90    0                                                    0  r[90]=1
 181    Column     10    1   93                                                    0  r[93]=idx_orders_customer_date.order_date
 182    Ne         93   92  186                                                    0  if r[93]!=r[92] goto 186
 183    Integer     2   90    0                                                    0  r[90]=2
 184    Goto        0  187    0                                                    0
 185    Column     10    0   91                                                    0  r[91]=idx_orders_customer_date.customer_id
 186    Column     10    1   92                                                    0  r[92]=idx_orders_customer_date.order_date
 187    Function    0   89   89  stat_push                                         0  r[89]=func(r[89..90])
 188  Next         10  177    0                                                    0
 189  Function      0   89   94  stat_get                                          0  r[94]=func(r[89])
 190  IsNull       94  195    0                                                    0  if (r[94]==NULL) goto 195
 191  Copy         94   97    0                                                    0  r[97]=r[94]
 192  MakeRecord   95    3   98                                                    0  r[98]=mkrec(r[95..97])
 193  NewRowid      1   99    0                                                    0  r[99]=rowid
 194  Insert        1   98   99  sqlite_stat1                                      0  intkey=r[99] data=r[98]
 195  Expire        0    0    0                                                    0
 196  Halt          0    0    0                                                    0
 197  Transaction   0    2    9                                                    0  iDb=0 tx_mode=Write
 198  String8       0   11    0  products                                          0  r[11]='products'
 199  String8       0   14    0  products                                          0  r[14]='products'
 200  String8       0   24    0  products                                          0  r[24]='products'
 201  String8       0   25    0  idx_products_price                                0  r[25]='idx_products_price'
 202  String8       0   34    0  products                                          0  r[34]='products'
 203  String8       0   35    0  idx_products_category                             0  r[35]='idx_products_category'
 204  String8       0   44    0  products                                          0  r[44]='products'
 205  String8       0   45    0  idx_products_sku                                  0  r[45]='idx_products_sku'
 206  String8       0   50    0  inventory                                         0  r[50]='inventory'
 207  String8       0   53    0  inventory                                         0  r[53]='inventory'
 208  String8       0   65    0  inventory                                         0  r[65]='inventory'
 209  String8       0   66    0  idx_inventory_location                            0  r[66]='idx_inventory_location'
 210  String8       0   71    0  orders                                            0  r[71]='orders'
 211  String8       0   74    0  orders                                            0  r[74]='orders'
 212  String8       0   84    0  orders                                            0  r[84]='orders'
 213  String8       0   85    0  idx_orders_status                                 0  r[85]='idx_orders_status'
 214  String8       0   95    0  orders                                            0  r[95]='orders'
 215  String8       0   96    0  idx_orders_customer_date                          0  r[96]='idx_orders_customer_date'
 216  Goto          0    1    0                                                    0
