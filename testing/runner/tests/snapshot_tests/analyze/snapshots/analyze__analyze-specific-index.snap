---
source: analyze.sqltest
expression: ANALYZE idx_products_sku;
info:
  statement_type: OTHER
  setup_blocks:
  - schema
  database: ':memory:'
---
QUERY PLAN


BYTECODE
addr  opcode       p1  p2  p3  p4                                               p5  comment
   0  Init          0  55   0                                                    0  Start at 55
   1  Null          0   1   0                                                    0  r[1]=NULL
   2  CreateBtree   0   2   1                                                    0  r[2]=root iDb=0 flags=1
   3  OpenWrite     0   1   0                                                    0  root=1; iDb=0
   4  NewRowid      0   3   0                                                    0  r[3]=rowid
   5  String8       0   4   0  table                                             0  r[4]='table'
   6  String8       0   5   0  sqlite_stat1                                      0  r[5]='sqlite_stat1'
   7  String8       0   6   0  sqlite_stat1                                      0  r[6]='sqlite_stat1'
   8  Copy          2   7   0                                                    0  r[7]=r[2]
   9  String8       0   8   0  CREATE TABLE sqlite_stat1(tbl,idx,stat)           0  r[8]='CREATE TABLE sqlite_stat1(tbl,idx,stat)'
  10  MakeRecord    4   5   9                                                    0  r[9]=mkrec(r[4..8])
  11  Insert        0   9   3  sqlite_stat1                                      0  intkey=r[3] data=r[9]
  12  ParseSchema   0   0   0  tbl_name = 'sqlite_stat1' AND type != 'trigger'   0  tbl_name = 'sqlite_stat1' AND type != 'trigger'
  13  SetCookie     0   1  10                                                    0
  14  OpenWrite     1   2   0                                                    0  root=2; iDb=0
  15  Rewind        1  24   0                                                    0  Rewind  sqlite_stat1
  16      Column    1   0  10                                                    0  r[10]=sqlite_stat1.tbl
  17      Ne       10  11  23                                                    0  if r[10]!=r[11] goto 23
  18      Column    1   1  12                                                    0  r[12]=sqlite_stat1.idx
  19      Ne       12  13  23                                                    0  if r[12]!=r[13] goto 23
  20      RowId     1  14   0                                                    0  r[14]=sqlite_stat1.rowid
  21      Delete    1   0   0  sqlite_stat1                                      0
  22    Next        1  16   0                                                    0
  23  Next          1  16   0                                                    0
  24  OpenRead      2   2   0  k(6,B,B,B,B,B,B)                                  0  =products, root=2, iDb=0
  25  Count         2  20   0                                                    0
  26  IfNot        20  33   0                                                    0  if !r[20] goto 33
  27  Null          0  17   0                                                    0  r[17]=NULL
  28  Copy         20  18   0                                                    0  r[18]=r[20]
  29  Cast         18   0   0                                                    0  affinity(r[18]=Text)
  30  MakeRecord   16   3  19                                                    0  r[19]=mkrec(r[16..18])
  31  NewRowid      1  15   0                                                    0  r[15]=rowid
  32  Insert        1  19  15  sqlite_stat1                                      0  intkey=r[15] data=r[19]
  33  OpenRead      3   3   0  k(2,B)                                            0  =idx_products_sku, root=3, iDb=0
  34  Integer       1  22   0                                                    0  r[22]=1
  35  Function      0  22  21  stat_init                                         0  r[21]=func(r[22])
  36  Rewind        3  53   0                                                    0  Rewind  idx_products_sku
  37  Integer       0  22   0                                                    0  r[22]=0
  38  Goto          0  44   0                                                    0
  39    Integer     0  22   0                                                    0  r[22]=0
  40    Column      3   0  24                                                    0  r[24]=idx_products_sku.sku
  41    Ne         24  23  44                                                    0  if r[24]!=r[23] goto 44
  42    Integer     1  22   0                                                    0  r[22]=1
  43    Goto        0  45   0                                                    0
  44    Column      3   0  23                                                    0  r[23]=idx_products_sku.sku
  45    Function    0  21  21  stat_push                                         0  r[21]=func(r[21..22])
  46  Next          3  39   0                                                    0
  47  Function      0  21  25  stat_get                                          0  r[25]=func(r[21])
  48  IsNull       25  53   0                                                    0  if (r[25]==NULL) goto 53
  49  Copy         25  28   0                                                    0  r[28]=r[25]
  50  MakeRecord   26   3  29                                                    0  r[29]=mkrec(r[26..28])
  51  NewRowid      1  30   0                                                    0  r[30]=rowid
  52  Insert        1  29  30  sqlite_stat1                                      0  intkey=r[30] data=r[29]
  53  Expire        0   0   0                                                    0
  54  Halt          0   0   0                                                    0
  55  Transaction   0   2   9                                                    0  iDb=0 tx_mode=Write
  56  String8       0  11   0  products                                          0  r[11]='products'
  57  String8       0  13   0  idx_products_sku                                  0  r[13]='idx_products_sku'
  58  String8       0  16   0  products                                          0  r[16]='products'
  59  String8       0  26   0  products                                          0  r[26]='products'
  60  String8       0  27   0  idx_products_sku                                  0  r[27]='idx_products_sku'
  61  Goto          0   1   0                                                    0
