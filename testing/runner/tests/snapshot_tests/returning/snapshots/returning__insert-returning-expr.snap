---
source: returning.sqltest
expression: INSERT INTO t1 VALUES (1, 'alice', 10.0) RETURNING id, upper(name), value * 2;
info:
  statement_type: INSERT
  tables:
  - t1
  setup_blocks:
  - schema
  database: ':memory:'
---
QUERY PLAN


BYTECODE
addr  opcode           p1  p2  p3  p4     p5  comment
   0  Init              0  46   0          0  Start at 46
   1  OpenEphemeral     1   1   0          0  cursor=1 is_table=true
   2  OpenWrite         2   2   0          0  root=2; iDb=0
   3  Integer           1   2   0          0  r[2]=1
   4  SoftNull          3   0   0          0
   5  String8           0   4   0  alice   0  r[4]='alice'
   6  Real              0   5   0  10.0    0  r[5]=10
   7  OpenWrite         0   3   0          0  root=3; iDb=0
   8  NotNull           2  10   0          0  r[2]!=NULL -> goto 10
   9  Goto              0  12   0          0
  10  MustBeInt         2   0   0          0
  11  Goto              0  13   0          0
  12  NewRowid          2   2   0          0  r[2]=rowid
  13  Affinity          3   3   0          0  r[3..6] = D, B, E
  14  NotExists         2  16   2          0
  15  Halt           1555   0   0  t1.id   0
  16  Copy              4   7   0          0  r[7]=r[4]
  17  Copy              2   8   0          0  r[8]=r[2]
  18  MakeRecord        3   3   6          0  r[6]=mkrec(r[3..5])
  19  Copy              4   9   0          0  r[9]=r[4]
  20  Copy              2  10   0          0  r[10]=r[2]
  21  MakeRecord        9   2  11          0  r[11]=mkrec(r[9..10]); for idx_t1_name
  22  IdxInsert         0  11   9          2  key=r[11]
  23  Insert            2   6   2  t1      0  intkey=r[2] data=r[6]
  24  Copy              2  12   0          0  r[12]=r[2]
  25  Copy              4  13   0          0  r[13]=r[4]
  26  Copy              5  14   0          0  r[14]=r[5]
  27  Copy             12  15   0          0  r[15]=r[12]
  28  Copy             13  18   0          0  r[18]=r[13]
  29  Function          0  18  16  upper   0  r[16]=func(r[18])
  30  Copy             14  19   0          0  r[19]=r[14]
  31  Integer           2  20   0          0  r[20]=2
  32  Multiply         19  20  17          0  r[17]=r[19]*r[20]
  33  MakeRecord       15   3  21          0  r[21]=mkrec(r[15..17])
  34  NewRowid          1  22   0          0  r[22]=rowid
  35  Insert            1  21  22          4  intkey=r[22] data=r[21]
  36  Goto              0  37   0          0
  37  Goto              0  38   0          0
  38  FkCheck           0   0   0          0
  39  Rewind            1  45   0          0  Rewind  ephemeral(t1)
  40    Column          1   0  23          0  r[23]=ephemeral(t1).id
  41    Column          1   1  24          0  r[24]=ephemeral(t1).name
  42    Column          1   2  25          0  r[25]=ephemeral(t1).value
  43    ResultRow      23   3   0          0  output=r[23..25]
  44  Next              1  40   0          0
  45  Halt              0   0   0          0
  46  Transaction       0   2   2          0  iDb=0 tx_mode=Write
  47  Goto              0   1   0          0
