---
source: returning.sqltest
expression: UPDATE t1 SET value = value * 2 RETURNING id, name || '-updated', value;
info:
  statement_type: UPDATE
  tables:
  - t1
  setup_blocks:
  - schema
  - data
  database: ':memory:'
---
QUERY PLAN


BYTECODE
addr  opcode          p1  p2  p3  p4        p5  comment
   0  Init             0  35   0             0  Start at 35
   1  OpenEphemeral    0   1   0             0  cursor=0 is_table=true
   2  OpenWrite        1   2   0             0  root=2; iDb=0
   3  Rewind           1  28   0             0  Rewind table t1
   4    RowId          1   1   0             0  r[1]=t1.rowid
   5    IsNull         1  28   0             0  if (r[1]==NULL) goto 28
   6    Null           0   2   0             0  r[2]=NULL
   7    Column         1   1   3             0  r[3]=t1.name
   8    Column         1   2   5             0  r[5]=t1.value
   9    RealAffinity   5   0   0             0
  10    Multiply       5   6   4             0  r[4]=r[5]*r[6]
  11    Affinity       2   3   0             0  r[2..5] = D, B, E
  12    RowId          1   7   0             0  r[7]=t1.rowid
  13    Column         1   1   8             0  r[8]=t1.name
  14    Column         1   2   9             0  r[9]=t1.value
  15    Null           0   2   0             0  r[2]=NULL
  16    Column         1   1   3             0  r[3]=t1.name
  17    MakeRecord     2   3  10             0  r[10]=mkrec(r[2..4])
  18    Insert         1  10   1  t1         8  intkey=r[1] data=r[10]
  19    Copy           1  11   0             0  r[11]=r[1]
  20    Copy           3  14   0             0  r[14]=r[3]
  21    String8        0  15   0  -updated   0  r[15]='-updated'
  22    Concat        15  14  12             0  r[12]=r[14] + r[15]
  23    Copy           4  13   0             0  r[13]=r[4]
  24    MakeRecord    11   3  16             0  r[16]=mkrec(r[11..13])
  25    NewRowid       0  17   0             0  r[17]=rowid
  26    Insert         0  16  17             4  intkey=r[17] data=r[16]
  27  Next             1   4   0             0
  28  Rewind           0  34   0             0  Rewind  ephemeral(t1)
  29    Column         0   0  18             0  r[18]=ephemeral(t1).id
  30    Column         0   1  19             0  r[19]=ephemeral(t1).name
  31    Column         0   2  20             0  r[20]=ephemeral(t1).value
  32    ResultRow     18   3   0             0  output=r[18..20]
  33  Next             0  29   0             0
  34  Halt             0   0   0             0
  35  Transaction      0   2   2             0  iDb=0 tx_mode=Write
  36  Integer          2   6   0             0  r[6]=2
  37  Goto             0   1   0             0
