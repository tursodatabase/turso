---
source: returning.sqltest
expression: UPDATE t1 SET value = value + 1 WHERE name = 'alice' RETURNING *;
info:
  statement_type: UPDATE
  tables:
  - t1
  setup_blocks:
  - schema
  - data
  database: ':memory:'
---
QUERY PLAN


BYTECODE
addr  opcode          p1  p2  p3  p4     p5  comment
   0  Init             0  36   0          0  Start at 36
   1  OpenEphemeral    0   1   0          0  cursor=0 is_table=true
   2  OpenWrite        1   2   0          0  root=2; iDb=0
   3  OpenWrite        2   3   0          0  root=3; iDb=0
   4  String8          0   1   0  alice   0  r[1]='alice'
   5  SeekGE           2  28   1          0  key=[1..1]
   6    IdxGT          2  28   1          0  key=[1..1]
   7    DeferredSeek   2   1   0          0
   8    RowId          1   2   0          0  r[2]=t1.rowid
   9    IsNull         2  28   0          0  if (r[2]==NULL) goto 28
  10    Null           0   3   0          0  r[3]=NULL
  11    Column         2   0   4          0  r[4]=idx_t1_name.name
  12    Column         1   2   6          0  r[6]=t1.value
  13    RealAffinity   6   0   0          0
  14    Add            6   7   5          0  r[5]=r[6]+r[7]
  15    Affinity       3   3   0          0  r[3..6] = D, B, E
  16    MakeRecord     3   3   8          0  r[8]=mkrec(r[3..5])
  17    Insert         1   8   2  t1      8  intkey=r[2] data=r[8]
  18    Copy           2   9   0          0  r[9]=r[2]
  19    Copy           4  10   0          0  r[10]=r[4]
  20    Copy           5  11   0          0  r[11]=r[5]
  21    Copy           9  12   0          0  r[12]=r[9]
  22    Copy          10  13   0          0  r[13]=r[10]
  23    Copy          11  14   0          0  r[14]=r[11]
  24    MakeRecord    12   3  15          0  r[15]=mkrec(r[12..14])
  25    NewRowid       0  16   0          0  r[16]=rowid
  26    Insert         0  15  16          4  intkey=r[16] data=r[15]
  27  Next             2   6   0          0
  28  FkCheck          0   0   0          0
  29  Rewind           0  35   0          0  Rewind  ephemeral(t1)
  30    Column         0   0  17          0  r[17]=ephemeral(t1).id
  31    Column         0   1  18          0  r[18]=ephemeral(t1).name
  32    Column         0   2  19          0  r[19]=ephemeral(t1).value
  33    ResultRow     17   3   0          0  output=r[17..19]
  34  Next             0  30   0          0
  35  Halt             0   0   0          0
  36  Transaction      0   2   2          0  iDb=0 tx_mode=Write
  37  Integer          1   7   0          0  r[7]=1
  38  Goto             0   1   0          0
