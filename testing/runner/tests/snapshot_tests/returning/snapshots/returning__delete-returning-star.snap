---
source: returning.sqltest
expression: DELETE FROM t1 WHERE id = 2 RETURNING *;
info:
  statement_type: DELETE
  tables:
  - t1
  setup_blocks:
  - schema
  - data
  database: ':memory:'
---
QUERY PLAN


BYTECODE
addr  opcode         p1  p2  p3  p4  p5  comment
   0  Init            0  30   0       0  Start at 30
   1  OpenEphemeral   0   1   0       0  cursor=0 is_table=true
   2  OpenWrite       1   2   0       0  root=2; iDb=0
   3  OpenWrite       2   3   0       0  root=3; iDb=0
   4  SeekRowid       1   1  22       0  if (r[1]!=cursor 1 for table t1.rowid) goto 22
   5  RowId           1   2   0       0  r[2]=t1.rowid
   6  RowId           1   3   0       0  r[3]=t1.rowid
   7  Column          1   1   4       0  r[4]=t1.name
   8  Column          1   2   5       0  r[5]=t1.value
   9  Column          1   1   6       0  r[6]=t1.name
  10  RowId           1   7   0       0  r[7]=t1.rowid
  11  IdxDelete       2   6   2       1
  12  Copy            2   8   0       0  r[8]=r[2]
  13  Copy            4   9   0       0  r[9]=r[4]
  14  Copy            5  10   0       0  r[10]=r[5]
  15  Copy            8  11   0       0  r[11]=r[8]
  16  Copy            9  12   0       0  r[12]=r[9]
  17  Copy           10  13   0       0  r[13]=r[10]
  18  MakeRecord     11   3  14       0  r[14]=mkrec(r[11..13])
  19  NewRowid        0  15   0       0  r[15]=rowid
  20  Insert          0  14  15       4  intkey=r[15] data=r[14]
  21  Delete          1   0   0  t1   0
  22  FkCheck         0   0   0       0
  23  Rewind          0  29   0       0  Rewind  ephemeral(t1)
  24    Column        0   0  16       0  r[16]=ephemeral(t1).id
  25    Column        0   1  17       0  r[17]=ephemeral(t1).name
  26    Column        0   2  18       0  r[18]=ephemeral(t1).value
  27    ResultRow    16   3   0       0  output=r[16..18]
  28  Next            0  24   0       0
  29  Halt            0   0   0       0
  30  Transaction     0   2   2       0  iDb=0 tx_mode=Write
  31  Integer         2   1   0       0  r[1]=2
  32  Goto            0   1   0       0
