---
source: returning.sqltest
expression: DELETE FROM t1 WHERE id = 2 RETURNING *;
info:
  statement_type: DELETE
  tables:
  - t1
  setup_blocks:
  - schema
  - data
  database: ':memory:'
---
QUERY PLAN


BYTECODE
addr  opcode         p1  p2  p3  p4  p5  comment
   0  Init            0  26   0       0  Start at 26
   1  OpenEphemeral   0   1   0       0  cursor=0 is_table=true
   2  OpenWrite       1   2   0       0  root=2; iDb=0
   3  OpenWrite       2   3   0       0  root=3; iDb=0
   4  SeekRowid       1   1  19       0  if (r[1]!=cursor 1 for table t1.rowid) goto 19
   5  RowId           1   2   0       0  r[2]=t1.rowid
   6  RowId           1   3   0       0  r[3]=t1.rowid
   7  Column          1   1   4       0  r[4]=t1.name
   8  Column          1   2   5       0  r[5]=t1.value
   9  Column          1   1   6       0  r[6]=t1.name
  10  RowId           1   7   0       0  r[7]=t1.rowid
  11  IdxDelete       2   6   2       1
  12  Copy            2   8   0       0  r[8]=r[2]
  13  Copy            4   9   0       0  r[9]=r[4]
  14  Copy            5  10   0       0  r[10]=r[5]
  15  MakeRecord      8   3  11       0  r[11]=mkrec(r[8..10])
  16  NewRowid        0  12   0       0  r[12]=rowid
  17  Insert          0  11  12       4  intkey=r[12] data=r[11]
  18  Delete          1   0   0  t1   0
  19  Rewind          0  25   0       0  Rewind  ephemeral(t1)
  20    Column        0   0  13       0  r[13]=ephemeral(t1).id
  21    Column        0   1  14       0  r[14]=ephemeral(t1).name
  22    Column        0   2  15       0  r[15]=ephemeral(t1).value
  23    ResultRow    13   3   0       0  output=r[13..15]
  24  Next            0  20   0       0
  25  Halt            0   0   0       0
  26  Transaction     0   2   2       0  iDb=0 tx_mode=Write
  27  Integer         2   1   0       0  r[1]=2
  28  Goto            0   1   0       0
