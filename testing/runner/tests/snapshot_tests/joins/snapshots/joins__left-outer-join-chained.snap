---
source: joins.sqltest
expression: |-
  SELECT
          c.name AS customer_name,
          o.order_id,
          oi.item_id,
          p.name AS product_name
      FROM
          customers c
      LEFT OUTER JOIN orders o ON c.customer_id = o.customer_id
      LEFT OUTER JOIN order_items oi ON o.order_id = oi.order_id
      LEFT OUTER JOIN products p ON oi.product_id = p.product_id;
info:
  statement_type: SELECT
  tables:
  - c.customer_id
  - customers
  - o.order_id
  - oi.product_id
  - order_items
  - orders
  - products
  setup_blocks:
  - schema
  database: ':memory:'
---
QUERY PLAN
|--SCAN customers AS c
|--SEARCH o USING INDEX idx_orders_customer_id
|--SEARCH oi USING INDEX idx_order_items_order_id
`--SEARCH p USING INTEGER PRIMARY KEY (rowid=?)

BYTECODE
addr  opcode              p1  p2  p3  p4              p5  comment
   0  Init                 0  41   0                   0  Start at 41
   1  OpenRead             0   2   0  k(5,B,B,B,B,B)   0  table=customers, root=2, iDb=0
   2  OpenRead             1   8   0  k(2,B)           0  index=idx_orders_customer_id, root=8, iDb=0
   3  OpenRead             2   5   0  k(5,B,B,B,B,B)   0  table=order_items, root=5, iDb=0
   4  OpenRead             3   9   0  k(2,B)           0  index=idx_order_items_order_id, root=9, iDb=0
   5  OpenRead             4   3   0  k(5,B,B,B,B,B)   0  table=products, root=3, iDb=0
   6  Rewind               0  40   0                   0  Rewind table customers
   7    Integer            0   5   0                   0  r[5]=0
   8    RowId              0   8   0                   0  r[8]=customers.rowid
   9    SeekGE             1  36   8                   0  key=[8..8]
  10      IdxGT            1  36   8                   0  key=[8..8]
  11      Integer          1   5   0                   0  r[5]=1
  12      Integer          0   6   0                   0  r[6]=0
  13      IdxRowId         1   9   0                   0  r[9]=cursor 1 for index idx_orders_customer_id.rowid
  14      SeekGE           3  31   9                   0  key=[9..9]
  15        IdxGT          3  31   9                   0  key=[9..9]
  16        DeferredSeek   3   2   0                   0
  17        Integer        1   6   0                   0  r[6]=1
  18        Integer        0   7   0                   0  r[7]=0
  19        Column         2   2  10                   0  r[10]=order_items.product_id
  20        SeekRowid      4  10  27                   0  if (r[10]!=cursor 4 for table products.rowid) goto 27
  21        Integer        1   7   0                   0  r[7]=1
  22        Column         0   1   1                   0  r[1]=customers.name
  23        IdxRowId       1   2   0                   0  r[2]=cursor 1 for index idx_orders_customer_id.rowid
  24        IdxRowId       3   3   0                   0  r[3]=cursor 3 for index idx_order_items_order_id.rowid
  25        Column         4   1   4                   0  r[4]=products.name
  26        ResultRow      1   4   0                   0  output=r[1..4]
  27        IfPos          7  30   0                   0  r[7]>0 -> r[7]-=0, goto 30
  28        NullRow        4   0   0                   0  Set cursor 4 to a (pseudo) NULL row
  29        Goto           0  21   0                   0
  30      Next             3  15   0                   0
  31      IfPos            6  35   0                   0  r[6]>0 -> r[6]-=0, goto 35
  32      NullRow          2   0   0                   0  Set cursor 2 to a (pseudo) NULL row
  33      NullRow          3   0   0                   0  Set cursor 3 to a (pseudo) NULL row
  34      Goto             0  17   0                   0
  35    Next               1  10   0                   0
  36    IfPos              5  39   0                   0  r[5]>0 -> r[5]-=0, goto 39
  37    NullRow            1   0   0                   0  Set cursor 1 to a (pseudo) NULL row
  38    Goto               0  11   0                   0
  39  Next                 0   7   0                   0
  40  Halt                 0   0   0                   0
  41  Transaction          0   1  10                   0  iDb=0 tx_mode=Read
  42  Goto                 0   1   0                   0
