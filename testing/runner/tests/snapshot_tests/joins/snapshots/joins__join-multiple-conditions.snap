---
source: joins.sqltest
expression: "SELECT\n        e1.name AS employee1,\n        e2.name AS employee2,\n        e1.department,\n        e1.salary\n    FROM\n        employees e1\n    INNER JOIN employees e2 ON\n        e1.department = e2.department\n        AND e1.salary = e2.salary\n        AND e1.employee_id < e2.employee_id;"
info:
  statement_type: SELECT
  tables:
    - e1.department
    - employees
  setup_blocks:
    - schema
  database: ":memory:"
---
QUERY PLAN
|--SCAN employees AS e1
`--SEARCH e2 USING INTEGER PRIMARY KEY (rowid=?)

BYTECODE
addr  opcode         p1  p2  p3  p4              p5  comment
   0  Init            0  20   0                   0  Start at 20
   1  OpenRead        0   6   0  k(5,B,B,B,B,B)   0  table=employees, root=6, iDb=0
   2  OpenRead        1   6   0  k(5,B,B,B,B,B)   0  table=employees, root=6, iDb=0
   3  Rewind          0  19   0                   0  Rewind table employees
   4    RowId         0   5   0                   0  r[5]=employees.rowid
   5    SeekGT        1  18   5                   0  key=[5..5]
   6      Column      0   3   7                   0  r[7]=employees.department
   7      Column      1   3   8                   0  r[8]=employees.department
   8      Ne          7   8  17  Binary           0  if r[7]!=r[8] goto 17
   9      Column      0   4  10                   0  r[10]=employees.salary
  10      Column      1   4  11                   0  r[11]=employees.salary
  11      Ne         10  11  17  Binary           0  if r[10]!=r[11] goto 17
  12      Column      0   1   1                   0  r[1]=employees.name
  13      Column      1   1   2                   0  r[2]=employees.name
  14      Column      0   3   3                   0  r[3]=employees.department
  15      Column      0   4   4                   0  r[4]=employees.salary
  16      ResultRow   1   4   0                   0  output=r[1..4]
  17    Next          1   6   0                   0
  18  Next            0   4   0                   0
  19  Halt            0   0   0                   0
  20  Transaction     0   1  10                   0  iDb=0 tx_mode=Read
  21  Goto            0   1   0                   0
