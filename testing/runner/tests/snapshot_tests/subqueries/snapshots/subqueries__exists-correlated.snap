---
source: subqueries.sqltest
expression: |-
  SELECT c.id, c.name
      FROM customers c
      WHERE EXISTS (
          SELECT 1
          FROM orders o
          WHERE o.customer_id = c.id
              AND o.total_amount > 500
      );
info:
  statement_type: SELECT
  tables:
  - customers
  - orders
  setup_blocks:
  - schema
  database: ':memory:'
---
QUERY PLAN
|--SCAN customers AS c
`--SEARCH o USING INDEX idx_orders_customer

BYTECODE
addr  opcode             p1  p2  p3  p4            p5  comment
   0  Init                0  20   0                 0  Start at 20
   1  OpenRead            0   6   0  k(4,B,B,B,B)   0  table=customers, root=6, iDb=0
   2  OpenRead            1   4   0  k(4,B,B,B,B)   0  table=orders, root=4, iDb=0
   3  OpenRead            2   9   0  k(2,B)         0  index=idx_orders_customer, root=9, iDb=0
   4  Rewind              0  19   0                 0  Rewind table customers
   5    RowId             0   4   0                 0  r[4]=customers.rowid
   6    SeekGE            2  17   4                 0  key=[4..4]
   7      IdxGT           2  17   4                 0  key=[4..4]
   8      DeferredSeek    2   1   0                 0
   9      Column          1   3   6                 0  r[6]=orders.total_amount
  10      RealAffinity    6   0   0                 0
  11      Le              6   7  16  Binary         0  if r[6]<=r[7] goto 16
  12      RowId           0   2   0                 0  r[2]=customers.rowid
  13      Column          0   1   3                 0  r[3]=customers.name
  14      ResultRow       2   2   0                 0  output=r[2..3]
  15      Goto            0  18   0                 0  ; semi-join: early out after first match
  16    Next              2   7   0                 0
  17    Goto              0  18   0                 0  ; semi-join: no match, skip outer row
  18  Next                0   5   0                 0
  19  Halt                0   0   0                 0
  20  Transaction         0   1  11                 0  iDb=0 tx_mode=Read
  21  Integer           500   7   0                 0  r[7]=500
  22  Goto                0   1   0                 0
