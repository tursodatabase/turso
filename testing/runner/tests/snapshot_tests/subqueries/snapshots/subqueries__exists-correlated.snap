---
source: subqueries.sqltest
expression: |-
  SELECT c.id, c.name
      FROM customers c
      WHERE EXISTS (
          SELECT 1
          FROM orders o
          WHERE o.customer_id = c.id
              AND o.total_amount > 500
      );
info:
  statement_type: SELECT
  tables:
  - customers
  - orders
  setup_blocks:
  - schema
  database: ':memory:'
---
QUERY PLAN
|--SCAN customers AS c
`--SEARCH o USING INDEX idx_orders_customer

BYTECODE
addr  opcode               p1  p2  p3  p4            p5  comment
   0    Init                0  26   0                 0  Start at 26
   1    OpenRead            0   6   0  k(4,B,B,B,B)   0  table=customers, root=6, iDb=0
   2    Rewind              0  25   0                 0  Rewind table customers
   3      BeginSubrtn       4   0   0                 0  r[4]=NULL
   4      Integer           0   1   0                 0  r[1]=0
   5      Integer           1   6   0                 0  r[6]=1; LIMIT counter
   6      IfNot             6  19   0                 0  if !r[6] goto 19
   7      OpenRead          1   4   0  k(4,B,B,B,B)   0  table=orders, root=4, iDb=0
   8      OpenRead          2   9   0  k(2,B)         0  index=idx_orders_customer, root=9, iDb=0
   9      RowId             0   7   0                 0  r[7]=customers.rowid
  10      SeekGE            2  19   7                 0  key=[7..7]
  11        IdxGT           2  19   7                 0  key=[7..7]
  12        DeferredSeek    2   1   0                 0
  13        Column          1   3   9                 0  r[9]=orders.total_amount
  14        RealAffinity    9   0   0                 0
  15        Le              9  10  18  Binary         0  if r[9]<=r[10] goto 18
  16        Integer         1   1   0                 0  r[1]=1
  17        DecrJumpZero    6  19   0                 0  if (--r[6]==0) goto 19
  18      Next              2  11   0                 0
  19    Return              4   0   1                 0
  20    IfNot               1  24   1                 0  if !r[1] goto 24
  21    RowId               0   2   0                 0  r[2]=customers.rowid
  22    Column              0   1   3                 0  r[3]=customers.name
  23    ResultRow           2   2   0                 0  output=r[2..3]
  24  Next                  0   3   0                 0
  25  Halt                  0   0   0                 0
  26  Transaction           0   1  11                 0  iDb=0 tx_mode=Read
  27  Integer             500  10   0                 0  r[10]=500
  28  Goto                  0   1   0                 0
