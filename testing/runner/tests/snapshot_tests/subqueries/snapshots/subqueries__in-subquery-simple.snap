---
source: subqueries.sqltest
expression: "SELECT id, name, price\n    FROM products\n    WHERE category_id IN (\n        SELECT id\n        FROM categories\n        WHERE name LIKE '%Electronics%'\n    );"
info:
  statement_type: SELECT
  tables:
    - categories
    - products
  setup_blocks:
    - schema
  database: ":memory:"
---
QUERY PLAN
|--SCAN categories
`--SCAN products

BYTECODE
addr  opcode          p1  p2  p3  p4              p5  comment
   0  Init             0  39   0                   0  Start at 39
   1  Once            12   0   0                   0  goto 12
   2  OpenEphemeral    0   0   0                   0  cursor=0 is_table=false
   3  OpenRead         1   3   0  k(3,B,B,B)       0  table=categories, root=3, iDb=0
   4  Rewind           1  12   0                   0  Rewind table categories
   5    Column         1   1   4                   0  r[4]=categories.name
   6    Function       1   3   2  like(2)          0  r[2]=func(r[3..4])
   7    IfNot          2  11   1                   0  if !r[2] goto 11
   8    RowId          1   1   0                   0  r[1]=categories.rowid
   9    MakeRecord     1   1   5                   0  r[5]=mkrec(r[1..1]); for ephemeral_index_where_sub_t2
  10    IdxInsert      0   5   0                   8  key=r[5]
  11  Next             1   5   0                   0
  12  OpenRead         2   2   0  k(5,B,B,B,B,B)   0  table=products, root=2, iDb=0
  13  Rewind           2  38   0                   0  Rewind table products
  14    Integer        0   9   0                   0  r[9]=0
  15    Column         2   2  10                   0  r[10]=products.category_id
  16    IsNull        10  20   0                   0  if (r[10]==NULL) goto 20
  17    Affinity      10   1   0                   0  r[10..11] = D
  18    NotFound       0  20  10                   0  if not found goto 20
  19    Goto           0  26   0                   0
  20    Rewind         0  28   0                   0  Rewind  ephemeral_index_where_sub_t2
  21      Column       0   0  11                   0  r[11]=ephemeral_index_where_sub_t2.id
  22      Ne          10  11  24  Binary           0  if r[10]!=r[11] goto 24
  23      Goto         0  30   0                   0
  24    Next           0  21   0                   0
  25    Goto           0  28   0                   0
  26    Integer        1   9   0                   0  r[9]=1
  27    Goto           0  31   0                   0
  28    Integer        0   9   0                   0  r[9]=0
  29    Goto           0  31   0                   0
  30    Null           0   9   0                   0  r[9]=NULL
  31    IfNot          9  37   1                   0  if !r[9] goto 37
  32    RowId          2   6   0                   0  r[6]=products.rowid
  33    Column         2   1   7                   0  r[7]=products.name
  34    Column         2   3   8                   0  r[8]=products.price
  35    RealAffinity   8   0   0                   0
  36    ResultRow      6   3   0                   0  output=r[6..8]
  37  Next             2  14   0                   0
  38  Halt             0   0   0                   0
  39  Transaction      0   1  11                   0  iDb=0 tx_mode=Read
  40  String8          0   3   0  %Electronics%    0  r[3]='%Electronics%'
  41  Goto             0   1   0                   0
