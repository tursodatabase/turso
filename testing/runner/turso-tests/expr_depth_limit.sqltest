@database :memory:

test nested-case-16-levels {
    SELECT CASE WHEN 1 THEN CASE WHEN 1 THEN CASE WHEN 1 THEN CASE WHEN 1 THEN CASE WHEN 1 THEN CASE WHEN 1 THEN CASE WHEN 1 THEN CASE WHEN 1 THEN CASE WHEN 1 THEN CASE WHEN 1 THEN CASE WHEN 1 THEN CASE WHEN 1 THEN CASE WHEN 1 THEN CASE WHEN 1 THEN CASE WHEN 1 THEN CASE WHEN 1 THEN 1 ELSE 0 END ELSE 0 END ELSE 0 END ELSE 0 END ELSE 0 END ELSE 0 END ELSE 0 END ELSE 0 END ELSE 0 END ELSE 0 END ELSE 0 END ELSE 0 END ELSE 0 END ELSE 0 END ELSE 0 END ELSE 0 END;
}
expect error {
    .*expression tree is too large.*
}

test nested-subquery-16-levels {
    SELECT (SELECT (SELECT (SELECT (SELECT (SELECT (SELECT (SELECT (SELECT (SELECT (SELECT (SELECT (SELECT (SELECT (SELECT (SELECT 1)))))))))))))));
}
expect error {
    .*expression tree is too large.*
}
