#!/usr/bin/env tclsh

set testdir [file dirname $argv0]
source $testdir/tester.tcl

## this should only be tested against turso as we differ in page-1 


do_execsql_test_on_specific_db {:memory:} dbtotxt-empty {
    .dbtotxt
} {"| size 0 pagesize 4096 filename :memory:"
"| end :memory:"}

do_execsql_test_on_specific_db {:memory:} dbtotxt-with-table {
    CREATE TABLE t(x);
    .dbtotxt
} {"| size 8192 pagesize 4096 filename :memory:"
"| page 1 offset 0"
"|      0: 53 51 4c 69 74 65 20 66 6f 72 6d 61 74 20 33 00   SQLite format 3."
"|     16: 10 00 02 02 00 40 20 20 00 00 00 01 00 00 00 02   .....@  ........"
"|     32: 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 04   ................"
"|     48: ff ff f8 30 00 00 00 00 00 00 00 01 00 00 00 00   ...0............"
"|     80: 00 00 00 00 00 00 00 00 00 00 00 00 00 2e 7e 58   ..............~X"
"|     96: 00 2e 7e 58 0d 00 00 00 01 0f de 00 0f de 00 00   ..~X............"
"|   4048: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 20 01   .............. ."
"|   4064: 06 17 0f 0f 01 31 74 61 62 6c 65 74 74 02 43 52   .....1tablett.CR"
"|   4080: 45 41 54 45 20 54 41 42 4c 45 20 74 20 28 78 29   EATE TABLE t (x)"
"| page 2 offset 4096"
"|      0: 0d 00 00 00 00 10 00 00 00 00 00 00 00 00 00 00   ................"
"| end :memory:"}
