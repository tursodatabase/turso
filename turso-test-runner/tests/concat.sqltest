@database :default:
@database :default-no-rowidalias:

#!/usr/bin/env tclsh
test concat {
    SELECT 'Hello' || ' ' || 'World';
}
expect {
    Hello World
}

test concat-2 {
    SELECT 'Hello' || NULL;
}
expect {
}

test concat-3 {
    SELECT 'Hello' || NULL;
}
expect {
}

test concat-4 {
    SELECT 'A good ' || name FROM products WHERE name = 'hat';
}
expect {
    A good hat
}

test concat-4-2 {
    SELECT 'A good ' || name FROM products WHERE name = 'watch';
}
expect {
}

test concat-blob {
    SELECT hex(x'01' || x'02');
}
expect {
    0102
}

# Issue #4860: Concat operator always returns text, even for blob+blob
# This matches SQLite behavior per https://sqlite.org/lang_expr.html
test concat-blob-typeof {
    SELECT typeof(X'ABCD' || X'1234');
}
expect {
    text
}

test concat-blob-hex-typeof {
    SELECT hex(X'ABCD' || X'1234'), typeof(X'ABCD' || X'1234');
}
expect {
    ABCD1234|text
}
