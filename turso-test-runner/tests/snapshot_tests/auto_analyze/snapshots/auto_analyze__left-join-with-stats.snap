---
source: auto_analyze.sqltest
expression: |-
  SELECT c.name, o.id
      FROM orders o
      LEFT JOIN customers c ON c.id = o.customer_id
      WHERE o.quantity > 5;
info:
  statement_type: SELECT
  tables:
  - c.id
  - customers
  - orders
  setup_blocks:
  - schema
  - data
  - auto_analyze_warmup
  database: ':memory:'
---
QUERY PLAN
|--SCAN orders AS o
`--SEARCH c USING INDEX ephemeral_customers_t2

BYTECODE
addr  opcode            p1  p2  p3  p4              p5  comment
   0  Init               0  38   0                   0  Start at 38
   1  OpenRead           0   4   0  k(5,B,B,B,B,B)   0  table=orders, root=4, iDb=0
   2  OpenRead           1   2   0  k(4,B,B,B,B)     0  table=customers, root=2, iDb=0
   3  Rewind             0  37   0                   0  Rewind table orders
   4    Column           0   3   5                   0  r[5]=orders.quantity
   5    Le               5   6  36  Binary           0  if r[5]<=r[6] goto 36
   6    Integer          0   3   0                   0  r[3]=0
   7    Once            17   0   0                   0  goto 17
   8    OpenAutoindex    2   0   0                   0  cursor=2
   9    Rewind           1  10   0                   0  Rewind table customers
  10      RowId          1   7   0                   0  r[7]=customers.rowid
  11      Column         1   1   8                   0  r[8]=customers.name
  12      RowId          1   9   0                   0  r[9]=customers.rowid
  13      MakeRecord     7   3  10                   0  r[10]=mkrec(r[7..9]); for ephemeral_customers_t2
  14      FilterAdd      2   7   1                   0  bloom_filter_add(r[7..8])
  15      IdxInsert      2  10   7                   0  key=r[10]
  16    Next             1  10   0                   0
  17    Column           0   1  11                   0  r[11]=orders.customer_id
  18    IsNull          11  32   0                   0  if (r[11]==NULL) goto 32
  19    Affinity        11   1   0                   0  r[11..12] = C
  20    Filter           2  32  11                   1  if !bloom_filter(r[11..12]) goto 32
  21    SeekGE           2  32  11                   0  key=[11..11]
  22      IdxGT          2  32  11                   0  key=[11..11]
  23      DeferredSeek   2   1   0                   0
  24      IdxRowId       2  13   0                   0  r[13]=cursor 2 for index ephemeral_customers_t2.rowid
  25      Column         0   1  14                   0  r[14]=orders.customer_id
  26      Ne            13  14  31  Binary           0  if r[13]!=r[14] goto 31
  27      Integer        1   3   0                   0  r[3]=1
  28      Column         2   1   1                   0  r[1]=ephemeral_customers_t2.name
  29      RowId          0   2   0                   0  r[2]=orders.rowid
  30      ResultRow      1   2   0                   0  output=r[1..2]
  31    Next             2  22   0                   0
  32    IfPos            3  36   0                   0  r[3]>0 -> r[3]-=0, goto 36
  33    NullRow          1   0   0                   0  Set cursor 1 to a (pseudo) NULL row
  34    NullRow          2   0   0                   0  Set cursor 2 to a (pseudo) NULL row
  35    Goto             0  27   0                   0
  36  Next               0   4   0                   0
  37  Halt               0   0   0                   0
  38  Transaction        0   1  13                   0  iDb=0 tx_mode=Read
  39  Integer            5   6   0                   0  r[6]=5
  40  Goto               0   1   0                   0
