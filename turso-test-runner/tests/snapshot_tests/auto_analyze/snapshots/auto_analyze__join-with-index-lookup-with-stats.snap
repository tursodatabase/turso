---
source: auto_analyze.sqltest
expression: |-
  SELECT o.id, o.quantity, c.name
      FROM orders o
      JOIN customers c ON c.id = o.customer_id
      WHERE o.customer_id = 42;
info:
  statement_type: SELECT
  tables:
  - c.id
  - customers
  - orders
  setup_blocks:
  - schema
  - data
  - auto_analyze_warmup
  database: ':memory:'
---
QUERY PLAN
|--SEARCH o USING INDEX idx_orders_customer
`--SEARCH c USING INDEX ephemeral_customers_t2

BYTECODE
addr  opcode            p1  p2  p3  p4              p5  comment
   0  Init               0  35   0                   0  Start at 35
   1  OpenRead           0   4   0  k(5,B,B,B,B,B)   0  table=orders, root=4, iDb=0
   2  OpenRead           1   6   0  k(2,B)           0  index=idx_orders_customer, root=6, iDb=0
   3  OpenRead           2   2   0  k(4,B,B,B,B)     0  table=customers, root=2, iDb=0
   4  Integer           42   4   0                   0  r[4]=42
   5  SeekGE             1  34   4                   0  key=[4..4]
   6    IdxGT            1  34   4                   0  key=[4..4]
   7    DeferredSeek     1   0   0                   0
   8    Once            18   0   0                   0  goto 18
   9    OpenAutoindex    3   0   0                   0  cursor=3
  10    Rewind           2  11   0                   0  Rewind table customers
  11      RowId          2   5   0                   0  r[5]=customers.rowid
  12      Column         2   1   6                   0  r[6]=customers.name
  13      RowId          2   7   0                   0  r[7]=customers.rowid
  14      MakeRecord     5   3   8                   0  r[8]=mkrec(r[5..7]); for ephemeral_customers_t2
  15      FilterAdd      3   5   1                   0  bloom_filter_add(r[5..6])
  16      IdxInsert      3   8   5                   0  key=r[8]
  17    Next             2  11   0                   0
  18    Column           0   1   9                   0  r[9]=orders.customer_id
  19    IsNull           9  33   0                   0  if (r[9]==NULL) goto 33
  20    Affinity         9   1   0                   0  r[9..10] = C
  21    Filter           3  33   9                   1  if !bloom_filter(r[9..10]) goto 33
  22    SeekGE           3  33   9                   0  key=[9..9]
  23      IdxGT          3  33   9                   0  key=[9..9]
  24      DeferredSeek   3   2   0                   0
  25      IdxRowId       3  11   0                   0  r[11]=cursor 3 for index ephemeral_customers_t2.rowid
  26      Column         0   1  12                   0  r[12]=orders.customer_id
  27      Ne            11  12  32  Binary           0  if r[11]!=r[12] goto 32
  28      IdxRowId       1   1   0                   0  r[1]=cursor 1 for index idx_orders_customer.rowid
  29      Column         0   3   2                   0  r[2]=orders.quantity
  30      Column         3   1   3                   0  r[3]=ephemeral_customers_t2.name
  31      ResultRow      1   3   0                   0  output=r[1..3]
  32    Next             3  23   0                   0
  33  Next               1   6   0                   0
  34  Halt               0   0   0                   0
  35  Transaction        0   1  13                   0  iDb=0 tx_mode=Read
  36  Goto               0   1   0                   0
