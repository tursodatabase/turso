---
source: auto_analyze.sqltest
expression: |-
  SELECT c.name, o.id, oi.quantity
      FROM order_items oi
      JOIN orders o ON o.id = oi.order_id
      JOIN customers c ON c.id = o.customer_id
      WHERE c.region = 'North' AND c.name LIKE 'Customer 1%';
info:
  statement_type: SELECT
  tables:
  - c.id
  - customers
  - o.id
  - order_items
  - orders
  setup_blocks:
  - schema
  - data
  - auto_analyze_warmup
  database: ':memory:'
---
QUERY PLAN
|--SEARCH oi USING INDEX idx_items_order
|--SEARCH o USING INDEX idx_orders_customer
`--SCAN customers AS c

BYTECODE
addr  opcode              p1  p2  p3  p4              p5  comment
   0  Init                 0  26   0                   0  Start at 26
   1  OpenRead             0   5   0  k(5,B,B,B,B,B)   0  table=order_items, root=5, iDb=0
   2  OpenRead             1   9   0  k(2,B)           0  index=idx_items_order, root=9, iDb=0
   3  OpenRead             2   6   0  k(2,B)           0  index=idx_orders_customer, root=6, iDb=0
   4  OpenRead             3   2   0  k(4,B,B,B,B)     0  table=customers, root=2, iDb=0
   5  Rewind               3  25   0                   0  Rewind table customers
   6    Column             3   2   5                   0  r[5]=customers.region
   7    Ne                 5   6  24  Binary           0  if r[5]!=r[6] goto 24
   8    Column             3   1   9                   0  r[9]=customers.name
   9    Function           1   8   7  like(2)          0  r[7]=func(r[8..9])
  10    IfNot              7  24   1                   0  if !r[7] goto 24
  11    RowId              3  10   0                   0  r[10]=customers.rowid
  12    SeekGE             2  24  10                   0  key=[10..10]
  13      IdxGT            2  24  10                   0  key=[10..10]
  14      IdxRowId         2  11   0                   0  r[11]=cursor 2 for index idx_orders_customer.rowid
  15      SeekGE           1  23  11                   0  key=[11..11]
  16        IdxGT          1  23  11                   0  key=[11..11]
  17        DeferredSeek   1   0   0                   0
  18        Column         3   1   1                   0  r[1]=customers.name
  19        IdxRowId       2   2   0                   0  r[2]=cursor 2 for index idx_orders_customer.rowid
  20        Column         0   3   3                   0  r[3]=order_items.quantity
  21        ResultRow      1   3   0                   0  output=r[1..3]
  22      Next             1  16   0                   0
  23    Next               2  13   0                   0
  24  Next                 3   6   0                   0
  25  Halt                 0   0   0                   0
  26  Transaction          0   1  13                   0  iDb=0 tx_mode=Read
  27  String8              0   6   0  North            0  r[6]='North'
  28  String8              0   8   0  Customer 1%      0  r[8]='Customer 1%'
  29  Goto                 0   1   0                   0
