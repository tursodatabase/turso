---
source: auto_analyze.sqltest
expression: |-
  SELECT o1.id, o2.id, o1.customer_id
      FROM orders o1
      JOIN orders o2 ON o1.customer_id = o2.customer_id
      WHERE o1.id < o2.id
      LIMIT 100;
info:
  statement_type: SELECT
  tables:
  - o1.customer_id
  - orders
  setup_blocks:
  - schema
  - data
  - auto_analyze_warmup
  database: ':memory:'
---
QUERY PLAN
|--SCAN orders AS o1 USING COVERING INDEX idx_orders_customer
`--SEARCH o2 USING INDEX idx_orders_customer

BYTECODE
addr  opcode             p1  p2  p3  p4      p5  comment
   0  Init                0  22   0           0  Start at 22
   1  Integer           100   4   0           0  r[4]=100; LIMIT counter
   2  IfNot               4  21   0           0  if !r[4] goto 21
   3  OpenRead            0   6   0  k(2,B)   0  index=idx_orders_customer, root=6, iDb=0
   4  OpenRead            1   6   0  k(2,B)   0  index=idx_orders_customer, root=6, iDb=0
   5  Rewind              0  21   0           0  Rewind index idx_orders_customer
   6    Column            0   0   5           0  r[5]=idx_orders_customer.customer_id
   7    IsNull            5  20   0           0  if (r[5]==NULL) goto 20
   8    Affinity          5   1   0           0  r[5..6] = C
   9    SeekGE            1  20   5           0  key=[5..5]
  10      IdxGT           1  20   5           0  key=[5..5]
  11      IdxRowId        0   7   0           0  r[7]=cursor 0 for index idx_orders_customer.rowid
  12      IdxRowId        1   8   0           0  r[8]=cursor 1 for index idx_orders_customer.rowid
  13      Ge              7   8  19  Binary   0  if r[7]>=r[8] goto 19
  14      IdxRowId        0   1   0           0  r[1]=cursor 0 for index idx_orders_customer.rowid
  15      IdxRowId        1   2   0           0  r[2]=cursor 1 for index idx_orders_customer.rowid
  16      Column          0   0   3           0  r[3]=idx_orders_customer.customer_id
  17      ResultRow       1   3   0           0  output=r[1..3]
  18      DecrJumpZero    4  21   0           0  if (--r[4]==0) goto 21
  19    Next              1  10   0           0
  20  Next                0   6   0           0
  21  Halt                0   0   0           0
  22  Transaction         0   1  13           0  iDb=0 tx_mode=Read
  23  Goto                0   1   0           0
